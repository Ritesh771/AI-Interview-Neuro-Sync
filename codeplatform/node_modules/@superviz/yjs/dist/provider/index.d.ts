import type { DefaultAttachComponentOptions } from '@superviz/sdk/dist/components/base/types';
import { ObservableV2 } from 'lib0/observable';
import * as Y from 'yjs';
import { Awareness } from '../services';
import { Events, Params } from './types';
export declare class SuperVizYjsProvider extends ObservableV2<Events> {
    doc: Y.Doc;
    readonly name = "yjsProvider";
    awareness: Awareness;
    document: Y.Doc;
    private _synced;
    private state;
    private isAttached;
    private localParticipant;
    private room;
    private logger;
    private ioc;
    private roomId;
    constructor(doc: Y.Doc, opts?: Params);
    /**
     * @function attach
     */
    attach(params: DefaultAttachComponentOptions): void;
    detach(): void;
    /**
     * @function connect
     * @description Connect to the room. With this, start to send and
     * receive awareness and document updates. This method is called
     * automatically when a SuperVizYjsProvider instance is created,
     * unless opted-out by passing "connect: false" in the constructor
     * options. Can't connect if it is already connected
     * @emits state
     * @returns {void}
     */
    private connect;
    /**
     * @function destroy
     * @description Disconnect from the room and reset the instance state.
     * @emits state @returns {void}
     */
    private destroyProvider;
    /**
     * @type {boolean}
     * @description Whether the user is connected to the room or not
     */
    get synced(): boolean;
    /**
     * @function createRoom
     * @description Create a new room and set the realtime and room instances
     * @returns {void}
     */
    private createRoom;
    /**
     * @function addRoomListeners
     * @description Add listeners to the room instance
     * @returns {void}
     */
    private addRoomListeners;
    /**
     * @function removeRoomListeners
     * @description Remove listeners from the room instance
     * @returns {void}
     */
    private removeRoomListeners;
    /**
     * @function startRealtime
     * @description Start the real-time connection with the room
     * @returns {void}
     */
    private startRealtime;
    /**
     * @function fetch
     * @description Request and apply all document updates from server
     * @returns {void}
     */
    private fetch;
    /**
     * @function updateDocument
     * @description Apply an update to the local document
     * @param {Uint8Array} update The update to apply
     * @returns {void}
     */
    private updateDocument;
    /**
     * @function changeState
     * @description Change the state of the provider
     * @param {ProviderState | `${ProviderState}`} state The new state
     * @returns {void}
     */
    private changeState;
    /**
     * @function onDocUpdate
     * @description Broadcast the local document update to all participants
     * @param {Uint8Array} update The update to broadcast
     * @returns {void}
     */
    private onDocUpdate;
    /**
     * @function onLocalJoinRoom
     * @description Start the awareness service, subscribe to real-time events and fetch the document
     * @param {PresenceEvent} event
     * @returns {void}
     */
    private onLocalJoinRoom;
    /**
     * @function onConnectionChange
     * @description Handle disconnection from the room
     * @param {ConnectionState} msg The connection state
     * @returns {void}
     */
    private onConnectionChange;
    /**
     * @function onRemoteDocUpdate
     * @description Apply changes to a remote document to the local document
     * @param {SocketEvent<DocUpdate>} event The event containing the update
     * @returns {void}
     */
    private onRemoteDocUpdate;
    /**
     * @function onReceiveRealtimeMessage
     * @description Emit a message received from the room
     * @param {string} name The message name
     * @param {any} data The message data
     * @returns {void}
     */
    private onReceiveRealtimeMessage;
    /**
     * @function beforeSendRealtimeMessage
     * @description Emit a message sent to the room
     * @param {string} name The message name
     * @param {any} data The message data
     * @returns {void}
     */
    private beforeSendRealtimeMessage;
}
