"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const T=require("./room-DPWLzMyU.cjs"),o=require("react"),t=require("./index-N3n6WSly.cjs"),c=n=>({[t.N.DESTROY]:n.onDestroy,[t.p.FRAME_DIMENSIONS_UPDATE]:n.onFrameDimensionsChange,[t.N.MEETING_WAITING_FOR_HOST]:n.onWaitingForHostChange,[t.N.MEETING_CONNECTION_STATUS_CHANGE]:n.onConnectionStatusChange,[t.N.MEETING_STATE_UPDATE]:n.onMeetingStateChange,[t.N.MEETING_SAME_PARTICIPANT_ERROR]:n.onSameAccountError,[t.N.MEETING_DEVICES_CHANGE]:n.onDevicesStateChange,[t.N.MEETING_HOST_CHANGE]:n.onHostChange,[t.N.MEETING_HOST_AVAILABLE]:n.onHostAvailable,[t.N.MEETING_NO_HOST_AVAILABLE]:n.onNoHostAvailable,[t.N.MEETING_START]:n.onMeetingStart,[t.N.MEETING_PARTICIPANT_JOINED]:n.onParticipantJoin,[t.N.MY_PARTICIPANT_JOINED]:n.onLocalParticipantJoin,[t.N.MEETING_PARTICIPANT_LEFT]:n.onParticipantLeave,[t.N.MY_PARTICIPANT_LEFT]:n.onLocalParticipantLeave,[t.N.MEETING_PARTICIPANT_LIST_UPDATE]:n.onParticipantListChange,[t.N.MEETING_PARTICIPANT_AMOUNT_UPDATE]:n.onParticipantAmountChange,[t.N.MEETING_KICK_PARTICIPANTS]:n.onKickAllParticipants,[t.N.MEETING_KICK_PARTICIPANT]:n.onKickLocalParticipant,mount:n.onMount,unmount:n.onUnmount});function J(n){const{onMeetingStart:_,onDestroy:P,onFrameDimensionsChange:M,onWaitingForHostChange:S,onConnectionStatusChange:g,onMeetingStateChange:p,onSameAccountError:m,onDevicesStateChange:L,onHostChange:R,onHostAvailable:d,onNoHostAvailable:f,onParticipantJoin:G,onLocalParticipantJoin:h,onParticipantLeave:O,onLocalParticipantLeave:D,onParticipantListChange:H,onParticipantAmountChange:v,onKickAllParticipants:F,onKickLocalParticipant:K,onMount:U,onUnmount:j}=n,{room:I,component:s,addComponent:x,removeComponent:y}=T.useInternalFeatures("videoConference"),[A,E]=o.useState(null),r=o.useRef({}),e=o.useRef(null);o.useEffect(()=>{if(!I||A||e.current)return;e.current=new t.Nt(n);const u=()=>{y(e.current),e.current=null,E(null)};e.current.subscribe("destroy",u),C(n),x(e.current),E(Date.now())},[I]),o.useEffect(()=>{const u=c(n);!e.current||!Object.values(r.current).length&&Object.values(u).every(a=>!a)||C(n)},[_,P,M,S,g,p,m,L,R,d,f,G,h,O,D,H,v,F,K,U,j]),o.useEffect(()=>{!s&&A&&E(null)},[s]);const C=o.useCallback(u=>{const a=c(u);Object.entries(a).forEach(([i,N])=>{r.current[i]&&(e.current.unsubscribe(i,r.current[i]),r.current[i]=void 0),N&&(e.current.subscribe(i,N),r.current[i]=N)})},[]);return T.jsxRuntimeExports.jsx(T.jsxRuntimeExports.Fragment,{})}exports.VideoConference=J;
