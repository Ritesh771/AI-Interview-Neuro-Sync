"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("./chunk-K5TMEGOR-CjzheANK.cjs");require("./chunk-3MEZQQ2J-Bai2OMk0.cjs");const x=require("./chunk-SDMTFDEM-DMM8sQyi.cjs"),H=require("./chunk-6U6BYUHV-h-2X1uK0.cjs"),_=require("./chunk-MVFOLHBC-C85clPX2.cjs"),s=require("./chunk-WG46WHJF-D0x9jAhS.cjs"),h=require("./index-N3n6WSly.cjs");h.y();var g=_.D(s.C),f=[g.styles,x.d];exports.CommentsFloatButton=class extends g{constructor(){super(),this.onTogglePinActive=({detail:{isActive:e}})=>{this.isActive=e},this.isHidden=!0,this.positionStyles="top: 20px; left: 20px;",this.shouldHide=!1,this.commentsPosition="left"}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{H.n.call(this,["comments"])}),this.mouseHovering=!1;let t=this.shadowRoot.querySelector(".comments__floating-button");t.addEventListener("mouseenter",()=>{setTimeout(()=>t.classList.add("comments-floating-button-hovered"),300),this.mouseHovering=!0}),t.addEventListener("mouseleave",()=>{t.classList.remove("comments-floating-button-hovered"),this.mouseHovering=!1})}toggle(){this.emitEvent("toggle",{})}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("toggle-annotation-sidebar",()=>{this.isHidden=!this.isHidden}),window.document.body.addEventListener("toggle-pin-active",this.onTogglePinActive)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("toggle-annotation-sidebar",()=>{this.isHidden=!this.isHidden}),window.document.body.removeEventListener("toggle-pin-active",this.onTogglePinActive)}updated(e){super.updated(e),this.updateComplete.then(()=>{let t=this.shadowRoot.querySelector(".comments__floating-button");t&&t.setAttribute("style",this.positionStyles)})}calculateIfShouldHide(){var e;let t=(e=document.getElementsByTagName("superviz-comments")[0])==null?void 0:e.shadowRoot.querySelector(".superviz-comments"),o=this.shadowRoot.querySelector(".comments__floating-button");if(!t||!o)return;let{left:n,right:c,top:l,bottom:d}=t.getBoundingClientRect(),{left:r,right:u,top:a,bottom:m}=o.getBoundingClientRect(),v=d>a&&m>l,p=l<m&&a<d,b=c>r&&u>n,y=n<u&&r<c;this.shouldHide=(p||v)&&(b||y)}render(){this.calculateIfShouldHide();let e={"comments__floating-button":!0,"hide-button":!this.isHidden&&this.shouldHide,"is-active":this.isActive,"is-inactive":!this.isActive},t={"comments__floating-button-text-box":!0,"comments__floating-button-text-box--hovered":this.mouseHovering},o={text:!0,"text-big":!0,"text-bold":!0,"not-hovered":!this.mouseHovering,"comments__floating-button__text":!0,textActive:this.isActive,textInactive:!this.isActive};return s.Vt` <button @click=${this.toggle} class="${i.u(e)}">
      <div class="comments__floating-button__icon">
        <superviz-icon
          size="sm"
          name="comment"
          color=${this.mouseHovering||this.isActive?"white":"black"}
        ></superviz-icon>
        <svg class="cross" width="8px" height="8px" viewBox="0 0 8 8">
          <rect class="cross-bar-1" x="0" y="3" width="8px" height="2px" />
          <rect class="cross-bar-2" x="0" y="3" width="8px" height="2px" />
        </svg>
      </div>
      <div class=${i.u(t)}>
        <p class="${i.u(o)} comment">Comment</p>
        <p class="${i.u(o)} cancel">Cancel</p>
      </div>
    </button>`}};exports.CommentsFloatButton.styles=f,exports.CommentsFloatButton.properties={positionStyles:{type:String},isHidden:{type:Boolean},commentsPosition:{type:String},isActive:{type:Boolean},mouseHovering:{type:Boolean}},exports.CommentsFloatButton=h.F([s.ts("superviz-comments-button")],exports.CommentsFloatButton);
