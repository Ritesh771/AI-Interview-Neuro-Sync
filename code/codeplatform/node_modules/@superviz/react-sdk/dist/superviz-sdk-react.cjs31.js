"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("./room-DPWLzMyU.cjs"),o=require("react"),S=require("./index-N3n6WSly.cjs"),x=new Map([["onConnect","connect"],["onDisconnect","disconnect"],["onSynced","synced"],["onSync","sync"],["onDestroy","destroy"],["onMessage","message"],["onOutgoingMessage","outgoingMessage"],["onStateChange","state"]]);function C({doc:m,awareness:p,onMount:E,onUnmount:M,children:j,...s}){const{room:c,component:n,addComponent:v}=i.useInternalFeatures("yjsProvider"),[a,u]=o.useState(null),[r,y]=o.useState({});return o.useEffect(()=>{var l;if(!n)return;const t=Object.entries(s),b=Object.entries(r);let f=!1;for(let e=0;e<t.length;e++)if(t[e][1]!==((l=b[e])==null?void 0:l[1])){f=!0;break}f&&(t.forEach(([e,d])=>{const g=x.get(e);r[e]&&n.off(g,r[e]),d&&n.on(g,d)}),y(s))},[s]),o.useEffect(()=>{if(!c||a)return;const t=new S.SuperVizYjsProvider(m,{awareness:p});v(t),u(Date.now())},[c]),o.useEffect(()=>{!n&&a&&u(null)},[n]),j??i.jsxRuntimeExports.jsx(i.jsxRuntimeExports.Fragment,{})}exports.YjsProvider=C;
