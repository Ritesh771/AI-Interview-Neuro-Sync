{
  "version": 3,
  "sources": ["../../@superviz/react-sdk/dist/annotation-item-VHKOJQVW-Baurzr8-.js"],
  "sourcesContent": ["import { y as C, e as g } from \"./index-CtPfqlcy.js\";\nimport { u as s } from \"./chunk-K5TMEGOR-DaSvC8Mu.js\";\nimport \"./chunk-3MEZQQ2J-CHe_tQrN.js\";\nimport { p as y } from \"./chunk-SDMTFDEM-n5DHnLs2.js\";\nimport { n as A } from \"./chunk-6U6BYUHV-TZ4JwLT4.js\";\nimport { D as x } from \"./chunk-MVFOLHBC-BeDRo2V6.js\";\nimport { V as r, a as f, t as S } from \"./chunk-WG46WHJF-JdNs68CV.js\";\nC();\nvar v = x(f), _ = [v.styles, y], d = class extends v {\n  constructor() {\n    super(...arguments), this.selectAnnotation = (t) => {\n      let { uuid: e } = this.annotation;\n      document.body.dispatchEvent(new CustomEvent(\"select-annotation\", { detail: { uuid: e } }));\n    }, this.resolveAnnotation = ({ detail: t }) => {\n      let { uuid: e } = this.annotation, { resolved: n, type: i } = t, o = i === \"resolve-annotation\" && this.annotationFilter === \"All comments\";\n      this.emitEvent(\"resolve-annotation\", { uuid: e, resolved: n }), o && (this.shouldShowUndoResolved = !0);\n    }, this.hideUndoResolved = () => {\n      this.shouldShowUndoResolved = !1;\n    }, this.generateExpandedCommentsTemplate = (t, e) => {\n      var n, i, o, a;\n      return e === 0 ? r`` : r`\n      <superviz-comments-comment-item\n        uuid=${t.uuid}\n        avatar=${(a = (o = (i = (n = this.annotation) == null ? void 0 : n.comments) == null ? void 0 : i.at(e)) == null ? void 0 : o.participant) == null ? void 0 : a.avatar}\n        username=${t.participant.name || \"Anonymous\"}\n        text=${t.text}\n        createdAt=${t.createdAt}\n        annotationId=${this.annotation.uuid}\n        participantsList=${JSON.stringify(this.participantsList)}\n        mentions=${JSON.stringify(t.mentions)}\n        class=\"comments__replies\"\n      ></superviz-comments-comment-item>\n    `;\n    }, this.updateEditMode = ({ detail: { editing: t } }) => {\n      this.hideInput = t;\n    };\n  }\n  firstUpdated(t) {\n    super.firstUpdated(t), this.updateComplete.then(() => {\n      A.call(this, [\"comments\"]);\n    });\n  }\n  get filterIsAll() {\n    return this.annotationFilter === \"All comments\";\n  }\n  get filterIsResolved() {\n    return this.annotationFilter === \"Resolved comments\";\n  }\n  get shouldHideAnnotation() {\n    return { hidden: this.resolved && this.filterIsAll || !this.resolved && this.filterIsResolved };\n  }\n  get replies() {\n    return [...this.annotation.comments].splice(1).length;\n  }\n  get repliesSize() {\n    return this.replies >= 5 ? 5 : this.replies;\n  }\n  get replyText() {\n    return this.replies !== 1 ? \"replies\" : \"reply\";\n  }\n  get isSelected() {\n    return this.selected === this.annotation.uuid;\n  }\n  get annotationClasses() {\n    return { comments__thread: !0, \"comments__thread--selected\": this.isSelected, \"extra-space-bottom\": this.replies };\n  }\n  get mainAnnotationClasses() {\n    return { \"comments__main-annotation\": !0, \"comments__main-annotation--selected\": this.isSelected };\n  }\n  get hrClasses() {\n    return { \"sv-hr\": !0, hidden: this.isLastAnnotation };\n  }\n  get avatarCommentsClasses() {\n    return { \"avatars-comments\": !0, \"comment-avatar--expand\": !this.expandComments && this.replies > 1, invisible: !(!this.expandComments && this.replies >= 1) };\n  }\n  get containerWrapperClasses() {\n    return { \"comments-container-wrapper\": !0, show: this.isSelected && this.expandComments };\n  }\n  get commentsClasses() {\n    return { \"comments-container\": !0, \"comment-item--expand\": this.isSelected && this.expandComments, show: this.isSelected && this.expandComments };\n  }\n  updated(t) {\n    if (t.has(\"selected\")) {\n      let e = this.selected === this.annotation.uuid;\n      this.expandComments = e;\n    }\n  }\n  createComment({ detail: t }) {\n    let { text: e, mentions: n } = t;\n    this.emitEvent(\"create-comment\", { uuid: this.annotation.uuid, mentions: n, text: e });\n  }\n  generateAvatarCommentsTemplate() {\n    var t, e, n, i, o, a;\n    let m = [];\n    for (let l = 1; l <= this.repliesSize; l++) (e = (t = this.annotation.comments[l]) == null ? void 0 : t.participant) != null && e.avatar ? m.push(r`\n          <div class=\"avatar\">\n            <img src=${(i = (n = this.annotation.comments[l]) == null ? void 0 : n.participant) == null ? void 0 : i.avatar} />\n          </div>\n        `) : m.push(r`\n          <div class=\"avatar\">\n            <p class=\"text text-bold\">\n              ${((a = (o = this.annotation.comments[l]) == null ? void 0 : o.participant.name[0]) == null ? void 0 : a.toUpperCase()) || \"A\"}\n            </p>\n          </div>\n        `);\n    return r`\n      ${m}\n      <div class=\"text text-big sv-gray-500\">${this.replies} ${this.replyText}</div>\n    `;\n  }\n  annotationResolvedTemplate() {\n    return this.shouldShowUndoResolved ? r`\n      <superviz-comments-annotation-resolved\n        @undo-resolve=${this.resolveAnnotation}\n        @hide=${this.hideUndoResolved}\n        class=${s({ hidden: this.filterIsResolved, \"comments__resolved-annotation-message\": !0 })}\n      >\n      </superviz-comments-annotation-resolved>\n    ` : r``;\n  }\n  get inputClasses() {\n    return { \"hide-input\": this.hideInput };\n  }\n  get wrapperClasses() {\n    return { wrapper: !0, \"show-wrapper\": !this.resolved && this.filterIsAll || this.resolved && this.filterIsResolved };\n  }\n  render() {\n    var t, e, n, i, o, a, m, l, p, c, h;\n    let u = { \"comments__complete-annotation\": !0, \"comments__hide-complete-annotation\": this.shouldShowUndoResolved };\n    return r`\n      <div class=\"${s(u)}\">\n        ${this.annotationResolvedTemplate()}\n\n        <div class=${s(this.wrapperClasses)}>\n          <div class=${s(this.shouldHideAnnotation)}>\n            <div class=${s(this.annotationClasses)} @click=${this.selectAnnotation}>\n              <div class=${s(this.mainAnnotationClasses)}>\n                <superviz-comments-comment-item\n                  uuid=${(t = this.annotation.comments) == null ? void 0 : t[0].uuid}\n                  annotationId=${this.annotation.uuid}\n                  username=${((n = (e = this.annotation.comments) == null ? void 0 : e[0].participant) == null ? void 0 : n.name) || \"Anonymous\"}\n                  text=${(i = this.annotation.comments) == null ? void 0 : i[0].text}\n                  createdAt=${(o = this.annotation.comments) == null ? void 0 : o[0].createdAt}\n                  participantsList=${JSON.stringify(this.participantsList)}\n                  primaryComment\n                  avatar=${(p = (l = (m = (a = this.annotation) == null ? void 0 : a.comments) == null ? void 0 : m.at(0)) == null ? void 0 : l.participant) == null ? void 0 : p.avatar}\n                  resolvable\n                  ?resolved=${this.resolved}\n                  annotationFilter=${this.annotationFilter}\n                  @resolve-annotation=${this.resolveAnnotation}\n                  mentions=${JSON.stringify((c = this.annotation.comments) == null ? void 0 : c[0].mentions)}\n                  class=\"comments__annotation\"\n                  @edit-comment=${this.updateEditMode}\n                ></superviz-comments-comment-item>\n              </div>\n\n              <div class=${s(this.containerWrapperClasses)}>\n                <div class=${s(this.commentsClasses)}>\n                  ${(h = this.annotation.comments) == null ? void 0 : h.map(this.generateExpandedCommentsTemplate)}\n                  <span class=${s(this.inputClasses)}>\n                    <superviz-comments-comment-input\n                      @create-comment=${this.createComment}\n                      eventType=\"create-comment\"\n                      @click=${($) => $.stopPropagation()}\n                      placeholder=\"Reply\"\n                      participantsList=${JSON.stringify(this.participantsList)}\n                    ></superviz-comments-comment-input>\n                  </span>\n                </div>\n              </div>\n              <div class=${s(this.avatarCommentsClasses)}>\n                <div class=\"avatar-container\">${this.generateAvatarCommentsTemplate()}</div>\n              </div>\n            </div>\n            <div class=${s(this.hrClasses)}></div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n};\nd.styles = _, d.properties = { annotation: { type: Object }, expandComments: { type: Boolean }, selected: { type: String, reflect: !0 }, resolved: { type: Boolean }, shouldShowUndoResolved: { type: Boolean }, isLastAnnotation: { type: Boolean }, annotationFilter: { type: String }, participantsList: { type: Object }, hideInput: { type: Boolean } }, d = g([S(\"superviz-comments-annotation-item\")], d);\nexport {\n  d as CommentsAnnotationItem\n};\n"],
  "mappings": "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",
  "names": ["m", "c"]
}
