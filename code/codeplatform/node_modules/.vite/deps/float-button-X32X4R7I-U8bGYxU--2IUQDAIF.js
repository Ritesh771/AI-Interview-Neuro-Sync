import {
  c
} from "./chunk-UCISHT4U.js";
import {
  S
} from "./chunk-2LBTZ565.js";
import "./chunk-NPBUWTT3.js";
import {
  g
} from "./chunk-XBJC4IFL.js";
import {
  f
} from "./chunk-OC6HSZIE.js";
import {
  Lt,
  Mt,
  T
} from "./chunk-3CQNC6PN.js";
import {
  O,
  QA
} from "./chunk-EQC6TVAW.js";
import "./chunk-IW2W7CGS.js";
import "./chunk-LK32TJAX.js";

// node_modules/@superviz/react-sdk/dist/float-button-X32X4R7I-U8bGYxU-.js
O();
var h = f(T);
var S2 = [h.styles, g];
var s = class extends h {
  constructor() {
    super(), this.onTogglePinActive = ({ detail: { isActive: e } }) => {
      this.isActive = e;
    }, this.isHidden = true, this.positionStyles = "top: 20px; left: 20px;", this.shouldHide = false, this.commentsPosition = "left";
  }
  firstUpdated(e) {
    super.firstUpdated(e), this.updateComplete.then(() => {
      S.call(this, ["comments"]);
    }), this.mouseHovering = false;
    let t = this.shadowRoot.querySelector(".comments__floating-button");
    t.addEventListener("mouseenter", () => {
      setTimeout(() => t.classList.add("comments-floating-button-hovered"), 300), this.mouseHovering = true;
    }), t.addEventListener("mouseleave", () => {
      t.classList.remove("comments-floating-button-hovered"), this.mouseHovering = false;
    });
  }
  toggle() {
    this.emitEvent("toggle", {});
  }
  connectedCallback() {
    super.connectedCallback(), window.document.body.addEventListener("toggle-annotation-sidebar", () => {
      this.isHidden = !this.isHidden;
    }), window.document.body.addEventListener("toggle-pin-active", this.onTogglePinActive);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), window.document.body.removeEventListener("toggle-annotation-sidebar", () => {
      this.isHidden = !this.isHidden;
    }), window.document.body.removeEventListener("toggle-pin-active", this.onTogglePinActive);
  }
  updated(e) {
    super.updated(e), this.updateComplete.then(() => {
      let t = this.shadowRoot.querySelector(".comments__floating-button");
      t && t.setAttribute("style", this.positionStyles);
    });
  }
  calculateIfShouldHide() {
    var e;
    let t = (e = document.getElementsByTagName("superviz-comments")[0]) == null ? void 0 : e.shadowRoot.querySelector(".superviz-comments"), o = this.shadowRoot.querySelector(".comments__floating-button");
    if (!t || !o) return;
    let { left: n, right: c2, top: d, bottom: l } = t.getBoundingClientRect(), { left: a, right: r, top: m, bottom: u } = o.getBoundingClientRect(), v = l > m && u > d, g2 = d < u && m < l, p = c2 > a && r > n, b = n < r && a < c2;
    this.shouldHide = (g2 || v) && (p || b);
  }
  render() {
    this.calculateIfShouldHide();
    let e = { "comments__floating-button": true, "hide-button": !this.isHidden && this.shouldHide, "is-active": this.isActive, "is-inactive": !this.isActive }, t = { "comments__floating-button-text-box": true, "comments__floating-button-text-box--hovered": this.mouseHovering }, o = { text: true, "text-big": true, "text-bold": true, "not-hovered": !this.mouseHovering, "comments__floating-button__text": true, textActive: this.isActive, textInactive: !this.isActive };
    return Mt` <button @click=${this.toggle} class="${c(e)}">
      <div class="comments__floating-button__icon">
        <superviz-icon
          size="sm"
          name="comment"
          color=${this.mouseHovering || this.isActive ? "white" : "black"}
        ></superviz-icon>
        <svg class="cross" width="8px" height="8px" viewBox="0 0 8 8">
          <rect class="cross-bar-1" x="0" y="3" width="8px" height="2px" />
          <rect class="cross-bar-2" x="0" y="3" width="8px" height="2px" />
        </svg>
      </div>
      <div class=${c(t)}>
        <p class="${c(o)} comment">Comment</p>
        <p class="${c(o)} cancel">Cancel</p>
      </div>
    </button>`;
  }
};
s.styles = S2, s.properties = { positionStyles: { type: String }, isHidden: { type: Boolean }, commentsPosition: { type: String }, isActive: { type: Boolean }, mouseHovering: { type: Boolean } }, s = QA([Lt("superviz-comments-button")], s);
export {
  s as CommentsFloatButton
};
//# sourceMappingURL=float-button-X32X4R7I-U8bGYxU--2IUQDAIF.js.map
