import {
  c
} from "./chunk-UCISHT4U.js";
import {
  S
} from "./chunk-2LBTZ565.js";
import "./chunk-NPBUWTT3.js";
import {
  r,
  x
} from "./chunk-XBJC4IFL.js";
import {
  f
} from "./chunk-OC6HSZIE.js";
import {
  Lt,
  Mt,
  T
} from "./chunk-3CQNC6PN.js";
import {
  O,
  QA
} from "./chunk-EQC6TVAW.js";
import "./chunk-IW2W7CGS.js";
import "./chunk-LK32TJAX.js";

// node_modules/@superviz/react-sdk/dist/comments-MGTDGIFZ-B7MhYZyz.js
O();
O();
var p;
function h(t) {
  let e = t.querySelector("#superviz-comments");
  if (e && !p) {
    let r2 = { childList: true, attributes: true, characterData: true, subtree: true };
    p = new MutationObserver((s) => {
      s.forEach((i) => {
        i.removedNodes.length && i.removedNodes.forEach((o) => {
          o.id === "poweredby-footer" && z(t);
        });
      });
    }), p.observe(e, r2);
  }
}
function z(t) {
  let e = document.createElement("div");
  e.id = "poweredby-footer", e.className = "footer";
  let r2 = document.createElement("div");
  r2.className = "powered-by powered-by--horizontal";
  let s = document.createElement("a");
  s.href = "https://superviz.com/", s.target = "_blank", s.className = "link";
  let i = document.createElement("div");
  i.textContent = "Powered by";
  let o = document.createElement("img");
  o.width = 48, o.height = 8.86, o.src = "https://production.cdn.superviz.com/static/superviz-gray-logo.svg", r2.appendChild(s), s.appendChild(i), i.appendChild(o), e.appendChild(r2);
  let l = t.getElementById("superviz-comments");
  l && l.appendChild(e), h(t);
}
var c2 = f(T);
var O2 = [c2.styles, r, x];
var a = class extends c2 {
  constructor() {
    super(), this.annotations = [], this.annotationFilter = "All comments", this.waterMarkState = false, this.participantsList = [], this.side = "left";
  }
  firstUpdated(t) {
    super.firstUpdated(t), this.updateComplete.then(() => {
      S.call(this, ["comments"]);
    });
  }
  updated(t) {
    super.updated(t), this.updateComplete.then(() => {
      this.waterMarkState && h(this.shadowRoot), t.has("offset") && this.applyOffset();
    });
  }
  participantsListed(t) {
    this.participantsList = t;
  }
  updateAnnotations(t) {
    this.annotations = t;
  }
  close() {
    this.emitEvent("close-threads", {});
  }
  waterMarkStatus(t) {
    this.waterMarkState = t;
  }
  setFilter({ detail: t }) {
    let { filter: { label: e } } = t;
    this.annotationFilter = e;
  }
  getOffset(t) {
    return t == null || t < 0 ? "10px" : `${t}px`;
  }
  applyOffset() {
    let t = this.shadowRoot.querySelector(".superviz-comments");
    if (!t) return;
    let { left: e, right: r2, top: s, bottom: i } = this.offset;
    t.style.setProperty("--offset-top", this.getOffset(s)), t.style.setProperty("--offset-bottom", this.getOffset(i)), t.style.setProperty("--offset-right", this.getOffset(r2)), t.style.setProperty("--offset-left", this.getOffset(e));
  }
  get poweredBy() {
    return this.waterMarkState ? Mt` <div id="poweredby-footer" class="footer">
      <div class="powered-by powered-by--horizontal">
        <a href="https://superviz.com/" target="_blank" class="link">
          <div class="">
            Powered by
            <img
              width="48px"
              height="8.86px"
              src="https://production.cdn.superviz.com/static/superviz-gray-logo.svg"
            />
          </div>
        </a>
      </div>
    </div>` : Mt``;
  }
  render() {
    let t = { "superviz-comments": true, "threads-on-left-side": this.side === "left", "threads-on-right-side": this.side === "right", "hide-at-right": this.side === "right" && !this.open, "hide-at-left": this.side === "left" && !this.open };
    return Mt`
      <div id="superviz-comments" class=${c(t)}>
        <div class="header">
          <superviz-comments-topbar
            @close-threads=${this.close}
            side=${this.side.split(":")[0]}
          ></superviz-comments-topbar>
        </div>
        <superviz-comments-annotation-filter
          filter=${this.annotationFilter}
          @select=${this.setFilter}
        >
        </superviz-comments-annotation-filter>
        <superviz-comments-content
          annotations=${JSON.stringify(this.annotations)}
          annotationFilter=${this.annotationFilter}
          participantsList=${JSON.stringify(this.participantsList)}
          class="content"
        ></superviz-comments-content>
        ${this.poweredBy}
      </div>
    `;
  }
};
a.styles = O2, a.properties = { open: { type: Boolean }, annotations: { type: Object }, annotationFilter: { type: String }, waterMarkState: { type: Boolean }, side: { type: String }, participantsList: { type: Object }, offset: { type: Object } }, a = QA([Lt("superviz-comments")], a);
export {
  a as Comments
};
//# sourceMappingURL=comments-MGTDGIFZ-B7MhYZyz-LHY4EZ7O.js.map
